---
title: ç¬¬ä¸€ä¸ªå…ƒç´ 
---

# {{ $frontmatter.title }}

## ğŸ¯ é¢˜ç›®æè¿°

å®ç°ä¸€ä¸ªé€šç”¨`First<T>`ï¼Œå®ƒæ¥å—ä¸€ä¸ªæ•°ç»„`T`å¹¶è¿”å›å®ƒçš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„ç±»å‹ã€‚

ä¾‹å¦‚ï¼š

```ts
type arr1 = ['a', 'b', 'c'];
type arr2 = [3, 2, 1];

type head1 = First<arr1>; // expected to be 'a'
type head2 = First<arr2>; // expected to be 3
```

## ğŸ” åˆ†æ

è¿™ä¸€é¢˜ä¸»è¦æ˜¯å›´ç»•å…ƒç»„çš„ï¼Œè¦è·å–å…ƒç»„çš„ç¬¬ä¸€ä¸ªï¼Œå°±å¿…é¡»è¦å€ŸåŠ© ts çš„ `infer` äº†ã€‚

è¿™ä¸€ç±»é¢˜çš„å¥—è·¯éƒ½å¦‚ä¸‹ï¼š`T extends [infer F, ...infer R] ? F : never`ã€‚

å…¶æœ¬è´¨å¯ä»¥è¯´æ˜¯æ¨¡å¼åŒ¹é…ï¼Œå¦‚æœ `T` èƒ½å¤ŸåŒ¹é…ä¸Š `[infer F, ...infer R]`ï¼Œé‚£ä¹ˆå°±å–å‰ä¸€ä¸ªç±»å‹ï¼Œå¦åˆ™èµ°åè€…ï¼ŒåŸºæœ¬é€»è¾‘å’Œ js ä¸­çš„ä¸‰å…ƒè¡¨è¾¾å¼ä¸€æ ·ã€‚

## ğŸ› ï¸ é¢˜è§£

äº†è§£äº† infer å’Œ extends ç”¨æ³•åï¼Œå…¶å®ç­”æ¡ˆä¹Ÿéå¸¸ç®€å•äº†ï¼š

```ts
type First<T extends any[]> = T extends [infer F, ...infer _] ? F : never;
```

è¿™é‡Œå€¼å¾—ä¸€æçš„å°±æ˜¯ `[] extends [infer F, ...infer R]` çš„åˆ¤æ–­ï¼Œç”±äºæœ‰ä¸¤ä¸ªå˜é‡éœ€è¦æ¨æ–­ï¼Œ`F` å’Œ `R`ï¼Œä½†æ˜¯åŸæ•°ç»„ä¸­ä¸€ä¸ªå…ƒç´ éƒ½æ²¡æœ‰ï¼Œæ­¤æ—¶å°±ä¼šèµ° false çš„é€»è¾‘ï¼Œè¿”å› neverã€‚è€Œå¦‚æœæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆè¿˜æ˜¯ä¼šèµ° true çš„é€»è¾‘ï¼Œæ­¤æ—¶ `R` ä¼šè¢«æ¨æ–­ä¸º `[]`ã€‚

## ğŸ’¡ çŸ¥è¯†ç‚¹

1. `xxx extends infer xxx ? A : B`ï¼Œinfer + extends èŒƒå¼
2. `[infer F, ...infer R]` ä¸­ï¼Œå¦‚æœ 1 ä¸ªå…ƒç´ éƒ½æ²¡æœ‰ï¼Œé‚£ä¹ˆèµ° false çš„é€»è¾‘

## å…¶ä»–è§£é¢˜æ€è·¯

ä¸Šé¢çš„è§£é¢˜æ€è·¯æ˜¯åˆ©ç”¨`infer`è¿›è¡ŒåŒ¹é…, è¿˜æœ‰ä¸€ç§å®Œå…¨ä¸åŒçš„æ€è·¯, æ˜¯åˆ©ç”¨å…ƒç»„çš„ç´¢å¼•ç‰¹æ€§, æˆ‘ä»¬é€šè¿‡`T[number]`å¯ä»¥è·å–ä»»æ„ä½ç½®çš„å…ƒç´ , è¿˜èƒ½é€šè¿‡`T['length']`è·å–å…ƒç»„çš„é•¿åº¦, ç±»æ¯”äº js ä¸­å›½å‘¢æˆ‘ä»¬è·å–ç¬¬ä¸€ä¸ªå…ƒç´ çš„æ–¹å¼, æˆ‘ä»¬å¯ä»¥å†™å‡ºå¦‚ä¸‹ä¼ªä»£ç :

```ts
// åˆ©ç”¨isEmptyåˆ¤æ–­æ•°ç»„æ˜¯å¦ä¸ºç©º
Array.isEmpty(arr) ? undefined : arr[0];

// æˆ–è€…åˆ©ç”¨lengthåˆ¤æ–­æ•°ç»„æ˜¯å¦ä¸ºç©º
arr.length === 0 ? undefined : arr[0];
```

å°†ä¸Šè¿°ä¼ªä»£ç æ”¹å†™æˆ typescript ç±»å‹ç‰ˆæœ¬:

```ts
type First<T extends any[]> = T['length'] extends 0 ? never : T[0];

// æˆ–è€…
type First<T extends any[]> = T extends [] ? never : T[0];
```