---
title: å®ç°Merge
---

# {{ $frontmatter.title }}

## ğŸ¯ é¢˜ç›®æè¿°

å°†ä¸¤ä¸ªç±»å‹åˆå¹¶æˆä¸€ä¸ªç±»å‹ï¼Œç¬¬äºŒä¸ªç±»å‹çš„é”®ä¼šè¦†ç›–ç¬¬ä¸€ä¸ªç±»å‹çš„é”®ã€‚

ä¾‹å¦‚:

```ts
type foo = {
  name: string;
  age: string;
};

type coo = {
  age: number;
  sex: string;
};

type Result = Merge<foo, coo>; // expected to be {name: string, age: number, sex: string}
```

## ğŸ” åˆ†æ

è¿™ä¸ªé¢˜å¦‚æœä¸è¦æ±‚åè€…åŒåå±æ€§è¦†ç›–å‰è€…çš„è¯ï¼Œç›´æ¥äº¤å‰å³å¯è§£å†³é—®é¢˜ã€‚

ä½†æ˜¯ç”±äºéœ€è¦è€ƒè™‘åˆ°åè€…è¦†ç›–å‰è€…ï¼Œæ­¤æ—¶äº¤å‰ä¸å¯è¡Œã€‚

æ•…åªèƒ½åœ¨æ–°ç±»å‹ä¸­ï¼Œå¯¹äºå‰è€…ï¼Œæ‹·è´å±æ€§æ—¶ï¼Œä¸èƒ½æºå¸¦å­˜åœ¨äºåè€…å±æ€§ä¸­çš„å±æ€§å³å¯ã€‚å¯ä»¥å†™å‡ºå¦‚ä¸‹ä»£ç ï¼š

```ts
type Merge<T, S> = {
  [P in Exclude<keyof T, keyof S>]: T[P];
} & S;
```

è¿™æ˜¯ä¸€ç§æ€è·¯ï¼Œä¸å€ŸåŠ© Exclude æœ¬èº«ä¹Ÿèƒ½å®ç°ï¼Œå°±æ˜¯å€ŸåŠ© [å®ç° Omit](/medium/å®ç°Omit.md) æ¥å®Œæˆï¼Œä»£ç å¦‚ä¸‹ï¼š

```ts
type Merge<T, S> = {
  [P in keyof T as P extends keyof S ? never : P]: T[P];
} & S;
```

è¿˜æœ‰æ²¡æœ‰å…¶ä»–æ€è·¯ï¼Ÿå…¶å®ä¹Ÿæœ‰ï¼Œå°±æ˜¯ä¸å€ŸåŠ©äº¤å‰ï¼Œç›´æ¥éå† `keyof T | keyof S`ï¼Œç„¶ååœ¨å–å€¼çš„æ—¶å€™å…ˆå–åè€…çš„ç±»å‹å³å¯ã€‚å¯ä»¥ç›´æ¥çœ‹é¢˜è§£ã€‚

## ğŸ› ï¸ é¢˜è§£

```ts
type Merge<F, S> = {
  // step1: éå†æ‰€æœ‰çš„ key
  [P in keyof F | keyof S]: P extends keyof S // å¦‚æœæ˜¯åè€…çš„é”®å€¼
    ? // å–åè€…çš„ç±»å‹ï¼Œè¿™é‡Œä¿è¯äº†åè€…è¦†ç›–å‰è€…
      S[P]
    : // å¦‚æœæ˜¯å‰è€…çš„å±æ€§
    P extends keyof F
    ? // è¿”å›å‰è€…çš„ç±»å‹
      F[P]
    : // ä¸ä¼šèµ°åˆ°è¿™ä¸€æµç¨‹
      never;
};
```

## ğŸ’¡ çŸ¥è¯†ç‚¹

1. åŒ [å®ç° Omit](/medium/å®ç°Omit.md)ã€‚